<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <style>
        :root {
            --bg-color: #1a1a1a;
            --container-bg: #404040;
            --text-color: white;
            --input-bg: #2a2a2a;
            --input-border: #555555;
            --input-focus-border: #777777;
            --placeholder-color: #999999;
            --button-bg: #1a1a1a;
            --button-border: #555555;
            --button-hover-border: #777777;
            --placeholder-border: #555555;
            --error-bg: #505050;
            --error-border: #666666;
            --button-text: white;
        }

        .light-mode {
            --bg-color: #f5f5f5;
            --container-bg: #ffffff;
            --text-color: #333333;
            --input-bg: #ffffff;
            --input-border: #cccccc;
            --input-focus-border: #666666;
            --placeholder-color: #999999;
            --button-bg: #666666;
            --button-border: #cccccc;
            --button-hover-border: #888888;
            --placeholder-border: #cccccc;
            --error-bg: #f8f8f8;
            --error-border: #cccccc;
            --button-text: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 40px 20px;
            background: var(--bg-color);
            min-height: 100vh;
            box-sizing: border-box;
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--button-bg);
            color: var(--button-text);
            border: 2px solid var(--button-border);
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .theme-toggle:hover {
            border-color: var(--input-focus-border);
            transform: translateY(-1px);
        }
        
        .container {
            background: var(--container-bg);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            text-align: center;
            transition: background-color 0.3s ease;
        }
        
        h1 {
            color: var(--text-color);
            margin-bottom: 30px;
            font-size: 2.5em;
            font-weight: 300;
            transition: color 0.3s ease;
        }
        
        .input-group {
            margin-bottom: 30px;
        }
        
        #textInput {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border: 2px solid var(--input-border);
            border-radius: 10px;
            outline: none;
            transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;
            box-sizing: border-box;
            background: var(--input-bg);
            color: var(--text-color);
        }
        
        #textInput:focus {
            border-color: var(--input-focus-border);
            box-shadow: 0 0 0 3px rgba(119, 119, 119, 0.1);
        }
        
        #textInput::placeholder {
            color: var(--placeholder-color);
        }
        
        #generateBtn {
            background: var(--button-bg);
            color: var(--button-text);
            border: 2px solid var(--button-border);
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.3s ease, background-color 0.3s ease;
            margin-top: 10px;
        }
        
        #generateBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            border-color: var(--button-hover-border);
        }
        
        #generateBtn:active {
            transform: translateY(0);
        }
        
        #qrcode {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100px;
        }
        
        .placeholder {
            color: var(--placeholder-color);
            font-style: italic;
            padding: 40px;
            border: 2px dashed var(--placeholder-border);
            border-radius: 10px;
            transition: color 0.3s ease, border-color 0.3s ease;
        }
        
        canvas {
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        
        .error {
            color: #f87171;
            margin-top: 15px;
            padding: 10px;
            background: var(--error-bg);
            border-radius: 5px;
            border: 1px solid var(--error-border);
            display: none;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .validation-info {
            color: #10b981;
            margin-top: 15px;
            padding: 10px;
            background: var(--error-bg);
            border-radius: 5px;
            border: 1px solid var(--error-border);
            display: none;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }
    </style>
</head>
<body>
    <button class="theme-toggle" id="themeToggle">Light Mode</button>
    
    <div class="container">
        <h1>QR Code Generator</h1>
        
        <div class="input-group">
            <input type="text" id="textInput" placeholder="Enter text to generate QR code..." maxlength="500">
        </div>
        
        <button id="generateBtn">Generate QR Code</button>
        
        <div class="error" id="errorMsg"></div>
        
        <div id="qrcode">
            <div class="placeholder">
                Enter some text above and click "Generate QR Code" to create your QR code
            </div>
        </div>
        
        <div class="validation-info" id="validationInfo"></div>
    </div>

    <script>
        const textInput = document.getElementById('textInput');
        const generateBtn = document.getElementById('generateBtn');
        const qrcodeDiv = document.getElementById('qrcode');
        const errorMsg = document.getElementById('errorMsg');
        const validationInfo = document.getElementById('validationInfo');
        const themeToggle = document.getElementById('themeToggle');

        // Theme toggle functionality
        function toggleTheme() {
            const body = document.body;
            const isDark = !body.classList.contains('light-mode');
            
            if (isDark) {
                body.classList.add('light-mode');
                themeToggle.textContent = 'Dark Mode';
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.remove('light-mode');
                themeToggle.textContent = 'Light Mode';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Load saved theme preference
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                themeToggle.textContent = 'Dark Mode';
            }
        }

        // Initialize theme
        loadTheme();

        // Validation patterns
        const patterns = {
            email: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
            url: /^https?:\/\/.+/,
            phone: /^[\+]?[1-9][\d]{0,15}$/,
            btc: /^(bc1|[13])[a-km-zA-HJ-NP-Z1-9]{25,34}$/,
            eth: /^0x[a-fA-F0-9]{40}$/,
            tron: /^T[A-Za-z1-9]{33}$/,
            sol: /^[1-9A-HJ-NP-Za-km-z]{32,44}$/,
            ada: /^addr1[a-z0-9]{98}$/,
            dot: /^1[a-km-zA-HJ-NP-Z1-9]{46,47}$/,
            xrp: /^r[a-km-zA-HJ-NP-Z1-9]{24,34}$/,
            ltc: /^[LM3][a-km-zA-HJ-NP-Z1-9]{26,33}$/,
            bch: /^[13][a-km-zA-HJ-NP-Z1-9]{25,34}$|^bitcoincash:[a-km-zA-HJ-NP-Z1-9]{25,34}$/,
            xlm: /^G[A-Z2-7]{55}$/,
            neo: /^A[0-9a-zA-Z]{33}$/,
            vet: /^0x[a-fA-F0-9]{40}$/,
            link: /^0x[a-fA-F0-9]{40}$/,
            uni: /^0x[a-fA-F0-9]{40}$/,
            ipv4: /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,
            ipv6: /^(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/,
            creditCard: /^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\d{3})\d{11})$/,
            isbn: /^(?:[0-9]{10}|[0-9]{13})$/,
            uuid: /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,
            mac: /^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/,
            date: /^\d{4}-\d{2}-\d{2}$/,
            time: /^([01]?[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?$/,
            wifi: /^WIFI:S:(.+);T:(WPA|WEP|);P:(.+);;$/,
            geo: /^-?\d+\.\d+,-?\d+\.\d+$/,
            // Social media handles
            twitter: /^@[a-zA-Z0-9_]{1,15}$/,
            instagram: /^@[a-zA-Z0-9._]{1,30}$/,
            tiktok: /^@[a-zA-Z0-9._]{2,24}$/,
            // File formats
            imageUrl: /\.(jpg|jpeg|png|gif|webp|svg|bmp|ico)$/i,
            videoUrl: /\.(mp4|avi|mov|wmv|flv|webm|mkv|m4v|3gp)$/i,
            audioUrl: /\.(mp3|wav|flac|aac|ogg|wma|m4a)$/i,
            // Document formats
            documentUrl: /\.(pdf|doc|docx|xls|xlsx|ppt|pptx|txt|rtf|odt|ods|odp)$/i,
            // Programming
            githubUrl: /^https?:\/\/(www\.)?github\.com\/[a-zA-Z0-9-]+\/[a-zA-Z0-9._-]+/,
            gitlabUrl: /^https?:\/\/(www\.)?gitlab\.com\/[a-zA-Z0-9-]+\/[a-zA-Z0-9._-]+/,
            // Contact formats
            vcard: /^BEGIN:VCARD/,
            mecard: /^MECARD:/,
            // App store links
            appStore: /^https?:\/\/apps\.apple\.com\/[a-z]{2}\/app\/[^\/]+\/id\d+/,
            playStore: /^https?:\/\/play\.google\.com\/store\/apps\/details\?id=/,
            // Payment systems
            paypal: /^https?:\/\/(www\.)?paypal\.me\/[a-zA-Z0-9._-]+/,
            venmo: /^https?:\/\/(www\.)?venmo\.com\/[a-zA-Z0-9._-]+/,
            // Tracking numbers
            ups: /^1Z[A-Z0-9]{16}$/,
            fedex: /^[0-9]{12}$|^[0-9]{15}$/,
            usps: /^[0-9]{20}$|^[0-9]{22}$/,
            // Color codes
            hexColor: /^#[0-9A-Fa-f]{6}$/,
            rgbColor: /^rgb\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*\)$/,
            // Mathematical expressions
            mathExpression: /^[0-9+\-*/().\s]+$/,
            // Hash formats
            md5: /^[a-fA-F0-9]{32}$/,
            sha1: /^[a-fA-F0-9]{40}$/,
            sha256: /^[a-fA-F0-9]{64}$/,
            // Time zones
            timezone: /^(UTC|GMT)[+-][0-9]{1,2}(:[0-9]{2})?$/,
            // Currency codes
            currency: /^[A-Z]{3}$/,
            // Language codes
            language: /^[a-z]{2}(-[A-Z]{2})?$/,
            // Domain names
            domain: /^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,
            // Port numbers
            port: /^[0-9]{1,5}$/,
            // Version numbers
            version: /^v?[0-9]+\.[0-9]+(\.[0-9]+)?(-[a-zA-Z0-9]+)?$/
        };

        function validateInput(text) {
            const trimmedText = text.trim();
            
            if (patterns.email.test(trimmedText)) {
                return "Valid email address detected";
            }
            if (patterns.url.test(trimmedText)) {
                return "Valid URL detected";
            }
            if (patterns.phone.test(trimmedText)) {
                return "Valid phone number detected";
            }
            if (patterns.btc.test(trimmedText)) {
                return "Valid Bitcoin address detected";
            }
            if (patterns.eth.test(trimmedText)) {
                return "Valid Ethereum address detected";
            }
            if (patterns.tron.test(trimmedText)) {
                return "Valid Tron address detected";
            }
            if (patterns.sol.test(trimmedText)) {
                return "Valid Solana address detected";
            }
            if (patterns.ada.test(trimmedText)) {
                return "Valid Cardano address detected";
            }
            if (patterns.dot.test(trimmedText)) {
                return "Valid Polkadot address detected";
            }
            if (patterns.xrp.test(trimmedText)) {
                return "Valid XRP address detected";
            }
            if (patterns.ltc.test(trimmedText)) {
                return "Valid Litecoin address detected";
            }
            if (patterns.bch.test(trimmedText)) {
                return "Valid Bitcoin Cash address detected";
            }
            if (patterns.xlm.test(trimmedText)) {
                return "Valid Stellar address detected";
            }
            if (patterns.neo.test(trimmedText)) {
                return "Valid NEO address detected";
            }
            if (patterns.vet.test(trimmedText)) {
                return "Valid VeChain address detected";
            }
            if (patterns.link.test(trimmedText)) {
                return "Valid Chainlink address detected";
            }
            if (patterns.uni.test(trimmedText)) {
                return "Valid Uniswap address detected";
            }
            if (patterns.ipv4.test(trimmedText)) {
                return "Valid IPv4 address detected";
            }
            if (patterns.ipv6.test(trimmedText)) {
                return "Valid IPv6 address detected";
            }
            if (patterns.creditCard.test(trimmedText.replace(/\s/g, ''))) {
                return "Valid credit card number detected";
            }
            if (patterns.isbn.test(trimmedText.replace(/[-\s]/g, ''))) {
                return "Valid ISBN detected";
            }
            if (patterns.uuid.test(trimmedText)) {
                return "Valid UUID detected";
            }
            if (patterns.mac.test(trimmedText)) {
                return "Valid MAC address detected";
            }
            if (patterns.date.test(trimmedText)) {
                return "Valid date (YYYY-MM-DD) detected";
            }
            if (patterns.time.test(trimmedText)) {
                return "Valid time format detected";
            }
            if (patterns.wifi.test(trimmedText)) {
                return "Valid WiFi QR code format detected";
            }
            if (patterns.geo.test(trimmedText)) {
                return "Valid GPS coordinates detected";
            }
            if (patterns.twitter.test(trimmedText)) {
                return "Valid Twitter handle detected";
            }
            if (patterns.instagram.test(trimmedText)) {
                return "Valid Instagram handle detected";
            }
            if (patterns.tiktok.test(trimmedText)) {
                return "Valid TikTok handle detected";
            }
            if (patterns.imageUrl.test(trimmedText)) {
                return "Valid image URL detected";
            }
            if (patterns.videoUrl.test(trimmedText)) {
                return "Valid video URL detected";
            }
            if (patterns.audioUrl.test(trimmedText)) {
                return "Valid audio URL detected";
            }
            if (patterns.documentUrl.test(trimmedText)) {
                return "Valid document URL detected";
            }
            if (patterns.githubUrl.test(trimmedText)) {
                return "Valid GitHub repository URL detected";
            }
            if (patterns.gitlabUrl.test(trimmedText)) {
                return "Valid GitLab repository URL detected";
            }
            if (patterns.vcard.test(trimmedText)) {
                return "Valid vCard format detected";
            }
            if (patterns.mecard.test(trimmedText)) {
                return "Valid MeCard format detected";
            }
            if (patterns.appStore.test(trimmedText)) {
                return "Valid App Store link detected";
            }
            if (patterns.playStore.test(trimmedText)) {
                return "Valid Google Play Store link detected";
            }
            if (patterns.paypal.test(trimmedText)) {
                return "Valid PayPal.me link detected";
            }
            if (patterns.venmo.test(trimmedText)) {
                return "Valid Venmo link detected";
            }
            if (patterns.ups.test(trimmedText)) {
                return "Valid UPS tracking number detected";
            }
            if (patterns.fedex.test(trimmedText)) {
                return "Valid FedEx tracking number detected";
            }
            if (patterns.usps.test(trimmedText)) {
                return "Valid USPS tracking number detected";
            }
            if (patterns.hexColor.test(trimmedText)) {
                return "Valid hex color code detected";
            }
            if (patterns.rgbColor.test(trimmedText)) {
                return "Valid RGB color code detected";
            }
            if (patterns.mathExpression.test(trimmedText) && trimmedText.length > 3) {
                return "Valid mathematical expression detected";
            }
            if (patterns.md5.test(trimmedText)) {
                return "Valid MD5 hash detected";
            }
            if (patterns.sha1.test(trimmedText)) {
                return "Valid SHA-1 hash detected";
            }
            if (patterns.sha256.test(trimmedText)) {
                return "Valid SHA-256 hash detected";
            }
            if (patterns.timezone.test(trimmedText)) {
                return "Valid timezone format detected";
            }
            if (patterns.currency.test(trimmedText)) {
                return "Valid currency code detected";
            }
            if (patterns.language.test(trimmedText)) {
                return "Valid language code detected";
            }
            if (patterns.domain.test(trimmedText) && !patterns.url.test(trimmedText)) {
                return "Valid domain name detected";
            }
            if (patterns.port.test(trimmedText) && parseInt(trimmedText) <= 65535) {
                return "Valid port number detected";
            }
            if (patterns.version.test(trimmedText)) {
                return "Valid version number detected";
            }
            
            return null;
        }

        function showValidationInfo(message) {
            validationInfo.textContent = message;
            validationInfo.style.display = 'block';
            errorMsg.style.display = 'none';
        }

        function hideValidationInfo() {
            validationInfo.style.display = 'none';
        }

        function generateQRCode() {
            const text = textInput.value.trim();
            
            // Hide error and validation messages
            errorMsg.style.display = 'none';
            hideValidationInfo();
            
            if (!text) {
                showError('Please enter some text to generate a QR code');
                return;
            }

            // Check for validation
            const validationMessage = validateInput(text);
            if (validationMessage) {
                showValidationInfo(validationMessage);
            }

            // Clear previous QR code
            qrcodeDiv.innerHTML = '';
            
            try {
                // Generate QR code using qrcode-generator library
                var qr = qrcode(0, 'M'); // 0 = auto-detect type, 'M' = medium error correction
                qr.addData(text);
                qr.make();
                
                // Create canvas and draw QR code
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const moduleCount = qr.getModuleCount();
                const cellSize = 8; // Size of each QR code cell
                const margin = 2; // Margin around QR code
                
                canvas.width = (moduleCount + margin * 2) * cellSize;
                canvas.height = (moduleCount + margin * 2) * cellSize;
                
                // Fill background
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw QR code
                ctx.fillStyle = '#333333';
                for (let row = 0; row < moduleCount; row++) {
                    for (let col = 0; col < moduleCount; col++) {
                        if (qr.isDark(row, col)) {
                            ctx.fillRect((col + margin) * cellSize, (row + margin) * cellSize, cellSize, cellSize);
                        }
                    }
                }
                
                qrcodeDiv.appendChild(canvas);
                
            } catch (error) {
                showError('Error generating QR code: ' + error.message);
            }
        }

        function showError(message) {
            errorMsg.textContent = message;
            errorMsg.style.display = 'block';
            qrcodeDiv.innerHTML = '<div class="placeholder">Please fix the error above and try again</div>';
        }

        // Event listeners
        generateBtn.addEventListener('click', generateQRCode);
        themeToggle.addEventListener('click', toggleTheme);
        
        textInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                generateQRCode();
            }
        });

        // Optional: Generate QR code as user types (with debounce)
        let timeout;
        textInput.addEventListener('input', function() {
            clearTimeout(timeout);
            timeout = setTimeout(() => {
                const text = textInput.value.trim();
                if (text) {
                    // Check validation first
                    const validationMessage = validateInput(text);
                    if (validationMessage) {
                        showValidationInfo(validationMessage);
                    } else {
                        hideValidationInfo();
                    }
                    generateQRCode();
                } else {
                    hideValidationInfo();
                    errorMsg.style.display = 'none';
                }
            }, 500);
        });
    </script>
</body>
</html>
